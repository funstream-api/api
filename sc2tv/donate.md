Донат
------

Для выполнения всех нижеописанных запросов необходимо получить токен, пройдя процедуру [авторизации](oauth.md).


API
-----
- [`POST` `/ajax/sc2tv_api/donate` Донат произвольной суммы](#Донат-произвольной-суммы)
- [`POST` `/ajax/sc2tv_api/fast_donate` Микродонат](#Микродонат)
- [`POST` `/ajax/sc2tv_api/get_user_balance` Баланс пользователя](#Баланс-пользователя)
- [`POST` `/ajax/sc2tv_api/get_user_balance_transactions` Транзакции пользователя](#Транзакции-пользователя)


#### Донат произвольной суммы
##### [`POST` `/ajax/sc2tv_api/donate`](http://sc2tv.ru/ajax/sc2tv_api/donate)

**запрос**
```
token: <string>, // токен пользователя в рамках приложения
streamer_uid: <int>, // уникальный идентификатор стримера
amount: <float> // сумма доната
```
**ответ при успешной операции**
```js
{
    status: true
}
```
**ответ при ошибке**
```js
{
    error_code: <int>, // код ошибки
    error: <string> // текст ошибки
}
```
Возможные ошибки:

1. У приложения нет прав на совершение данного запроса.
2. Неверный токен
3. Пользователь не является стримером
4. Недостаточно пекоинов
5. Ошибка при зачислении средств


#### Микродонат
##### [`POST` `/ajax/sc2tv_api/fast_donate`](http://sc2tv.ru/ajax/sc2tv_api/fast_donate)

Донат минимальной суммы, с появлением специальной картинки в чате стримера. 
Аналог значка доллара в чате.

**запрос**
```
token: <string>, // токен пользователя в рамках приложения
streamer_uid: <int> // уникальный идентификатор стримера
```
**ответ при успешной операции**
```js
{
    status: true
}
```
**ответ при ошибке**
```js
{
    error_code: <int>, // код ошибки
    error: <string> // текст ошибки
}
```
Возможные ошибки:

1. У приложения нет прав на совершение данного запроса
2. Неверный токен
3. Пользователь не является стримером
4. Недостаточно пекоинов
5. Ошибка при зачислении средств


#### Баланс пользователя
##### [`POST` `/ajax/sc2tv_api/get_user_balance`](http://sc2tv.ru/ajax/sc2tv_api/get_user_balance)

**запрос**
```
token: <string> // токен пользователя в рамках приложения
```
**ответ при успешной операции**
```js
{
    balance: <float>
}
```
**ответ при ошибке**
```js
{
    error_code: <int>, // код ошибки
    error: <string> // текст ошибки
}
```
Возможные ошибки:

1. У приложения нет прав на совершение данного запроса
2. Неверный токен


#### Транзакции пользователя
##### [`POST` `/ajax/sc2tv_api/get_user_balance_transactions`](http://sc2tv.ru/ajax/sc2tv_api/get_user_balance_transactions)

Возвращает транзакции пользователя за указанный промежуток времени.

**запрос**
```
token: <string>, // токен пользователя в рамках приложения
from: <string>, // дата и время начала периода
to: <string> // дата и время конца периода
```
**ответ при успешной операции**
```js
{
    history: [
        { // данные приведены для примера, реальные данные будут отличаться
            'id': 1,
            'amount': 10000.00,
            'balance_after': 10000.00,
            'agent': "SC2TV",
            'datetime': "17.06.2015 23:04",
            'timestamp': 1434571464,
            'anonim': false
        },
        ...
    ]
}
```
**ответ при ошибке**
```js
{
    error_code: <int>, // код ошибки
    error: <string> // текст ошибки
}
```
Возможные ошибки:

1. У приложения нет прав на совершение данного запроса.
2. Неверный токен


#### Пополнение баланса
##### [`POST` `/ajax/sc2tv_api/get_url_for_robo_restore`](http://sc2tv.ru/ajax/sc2tv_api/get_url_for_robo_restore)

Возвращает ссылку на пополнение баланса через робокассу.

**запрос**
```
token: <string>, // токен пользователя в рамках приложения
amount: <float>, // сумма пополнения
```
**ответ при успешной операции**
```js
{
    url: <string>
}
```
**ответ при ошибке**
```js
{
    error_code: <int>, // код ошибки
    error: <string> // текст ошибки
}
```
Возможные ошибки:

1. У приложения нет прав на совершение данного запроса.
2. Неверный токен

