API OAuth 
---------------

## Регистрация приложения

Для регистрации приложения на сайте [sc2tv.ru](http://sc2tv.ru) обратитесь к администрации портала.


## Получение доступа

- Приложение регистрируется и получается уникальный идентификтор <your_app_id>
- Формируется ссылка вида `http://sc2tv.ru/ajax/sc2tv_api/auth_app?app_id=<your_app_id>&key=<unique_key_in_your_app>`,
где `<unique_key_in_your_app>` это уникальный код для этой сессии от вашего приложения
- Пользователь открывает ссылку в браузере и подтверждает доступ для вашего приложения
- Приложение запрашивает токен запросом [`/ajax/sc2tv_api/get_token`](#Получение-токена-пользователя), передав туда
сформированный ранее уникальный код `<unique_key_in_your_app>`


API
-----
- [`POST` `/ajax/sc2tv_api/get_token` Получение токена пользователя](#Получение-токена-пользователя)


#### Получение токена пользователя
##### [`POST` `/ajax/sc2tv_api/get_token`](http://sc2tv.ru/ajax/sc2tv_api/get_token)

**запрос** 
```
key: <string> // Код от вашего приложения <unique_key_in_your_app>
```
**ответ при успешной операции**
```js
{
    token: <string>, // токен текущего пользователя в рамках приложения
}
```
**ответ при ошибке**
```js
{
    error: <int>, //код ошибки
}
```
Коды ошибок:

1. Пользователь еще не авторизовал приложение, либо отказал в авторизации
2. Для данного ключа уже был сгенерирован и возвращен токен
3. Ошибка сервера, пожалуйста повторите запрос.
