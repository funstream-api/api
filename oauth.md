## Использование

#### термины

сервер - веб-сервер фанстрим.тв  
приложение - веб-сервер приложения, либо приложение в телефоне  
пользователь - зарегистрированный пользователь на фанстрим.тв  
браузер - браузер пользователя

#### последовательность действий

1. приложение запрашивает код используя ```/api/oauth/request```
2. приложение передает код в браузер, предлагая пользователю
    перейти по ссылке ```http://funstream.tv/oauth/<code>```
3. пользователь переходит по ссылке (открывается в новом окне, target="blank")
4. пользователь подтверждает код для приложения, и закрывает окно
5. пользователь жмет "продолжить" в приложении
6. приложение получает токен используя ```/api/oauth/exchange```
7. приложение вызывает api фанстрим.тв используя полученый токен

## Описание вызовов

#### /api/oauth/request

запрос
```
{
    text: <string> name of the application or any other text for user
}
```

ответ
```
{
    code: <string> oauth access code
}
```

вернёт ошибку если текст не получен или пустой

#### /api/oauth/exchange

запрос
```
{
    code: <string> oauth access code
}
```

ответ
```
{
    token: <string> api access token
}
```

вернет ошибку если код не найден, либо если код не подтвержден пользователем

#### /api/oauth/check

запрос
```
{
    code: <string> oauth access code
}
```

ответ
```
{
    id: <int> id of access code
    text: <string> text passed with access code
}
```

вернёт ошибку если код не получен или пустой

#### /api/oauth/grant

запрос
```
{
    code: <string> oauth access code
}
```

ответ пустой, вернет ошибку если код не существует, уже подтвержден или пользователь не авторизован
